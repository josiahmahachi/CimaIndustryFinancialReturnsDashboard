@page "/filings"
@using blazor_wasm_ui.Models
@using blazor_wasm_ui.Shared

<div class="w-full min-h-screen bg-neutral-50">
    <div class="px-6 py-8 max-w-8xl mx-auto">
        <!-- Top Navigation Tabs -->
        <TopNavigation 
            ActiveTab="@ActiveTab" 
            OnTabChange="@OnTabChangeAsync" />

        <!-- Tab Content Header -->
        @{
            var (title, description, showStatusFilter) = GetTabContent();
        }

        @if (ActiveTab != "reports-analytics")
        {
            <div class="mb-8">
                <h1 class="text-3xl text-neutral-900 mb-2">@title</h1>
                <p class="text-neutral-600">@description</p>
            </div>

            <!-- Filters Section -->
            <FiltersSection
                FundType="@FundType"
                Status="@Status"
                PeriodYear="@PeriodYear"
                SearchQuery="@SearchQuery"
                OnFundTypeChange="@OnFundTypeChangeAsync"
                OnStatusChange="@OnStatusChangeAsync"
                OnPeriodYearChange="@OnPeriodYearChangeAsync"
                OnSearchChange="@OnSearchChangeAsync"
                OnResetFilters="@OnResetFiltersAsync"
                ShowStatusFilter="@showStatusFilter"
                ActiveTab="@ActiveTab"
                AvailableYears="@AvailableYears" />

            <!-- Returns Table -->
            <ReturnsTable
                Returns="@GetPagedReturns()"
                TotalReturns="@FilteredReturns.Count"
                CurrentPage="@CurrentPage"
                TotalPages="@TotalPages"
                OnNextPage="@NextPageAsync"
                OnPrevPage="@PrevPageAsync"
                OnGoToPage="@GoToPageAsync"
                OnRequestExtension="@OnRequestExtension"
                OnViewReturn="@OnViewReturn"
                OnViewExtension="@OnViewExtension"
                OnFileReturn="@OnFileReturn"
                OnRequestUnlock="@OnRequestUnlock"
                ActiveTab="@ActiveTab" />

            <!-- Help Section -->
            <HelpSection />
        }
        else
        {
            <!-- Reports & Analytics Tab -->
            <div class="bg-white border border-neutral-200 rounded px-8 py-8 text-center mt-8">
                <h2 class="text-2xl text-neutral-900 mb-4">Reports & Analytics</h2>
                <p class="text-neutral-600 mb-4">Charts and analytics view coming soon.</p>
                <p class="text-sm text-neutral-500">TODO: ReportsAnalyticsTab component</p>
            </div>
        }
    </div>
</div>
